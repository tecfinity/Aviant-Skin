/* CORE MODALS
   Native <dialog> element styling.
*/
dialog.av-modal {
  padding: 0;
  border: none;
  border-radius: var(--av-radius-lg);

  /* FIX: Explicit background and text color to prevent transparency issues */
  background-color: var(--av-surface-panel);
  color: var(--av-text-main);

  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  max-width: 90vw;
  width: 500px;
  margin: auto;

  &::backdrop {
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
    transition: opacity 0.3s;
  }

  &[open] {
    animation: av-modal-in var(--av-duration-normal) var(--av-ease-out);
  }

  .av-modal-header {
    padding: var(--av-space-4) var(--av-space-6);
    border-bottom: 1px solid var(--av-border-subtle);
    display: flex;
    justify-content: space-between;
    align-items: center;

    /* Ensure header text is readable */
    h3 {
      margin: 0;
      font-size: var(--av-text-lg);
      color: var(--av-text-main);
    }
  }

  .av-modal-body {
    padding: var(--av-space-6);
    color: var(--av-text-muted); /* Softer body text */
  }

  .av-modal-footer {
    padding: var(--av-space-4) var(--av-space-6);
    background-color: var(--av-surface-subtle);
    border-top: 1px solid var(--av-border-subtle);
    display: flex;
    justify-content: flex-end;
    gap: var(--av-space-3);
  }
}

@keyframes av-modal-in {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}